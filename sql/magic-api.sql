SET NAMES utf8mb4;

DROP TABLE IF EXISTS `magic_api_file`;
CREATE TABLE IF NOT EXISTS `magic_api_file` (
  `file_path` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '路径',
  `file_content` mediumtext CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci COMMENT '内容',
  PRIMARY KEY (`file_path`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci ROW_FORMAT=DYNAMIC COMMENT='magic api 接口表';

INSERT INTO `magic_api_file` (`file_path`, `file_content`) VALUES
	('magic-api/api/', 'this is directory'),
	('magic-api/api/业务功能/', 'this is directory'),
	('magic-api/api/业务功能/group.json', '{\r\n  "properties" : { },\r\n  "id" : "712c7134f4be4a1eaa3a17fd241f4549",\r\n  "name" : "业务功能",\r\n  "type" : "api",\r\n  "parentId" : "0",\r\n  "path" : null,\r\n  "createTime" : 1764439151397,\r\n  "updateTime" : null,\r\n  "createBy" : null,\r\n  "updateBy" : null,\r\n  "paths" : [ ],\r\n  "options" : [ ]\r\n}'),
	('magic-api/api/业务功能/文件管理/', 'this is directory'),
	('magic-api/api/业务功能/文件管理/file.ms', '{\r\n  "properties" : { },\r\n  "id" : "97f17b3c18ec48989a94d681510b7589",\r\n  "script" : null,\r\n  "groupId" : "7f73f510bd0b4cc5b689cfe01d745947",\r\n  "name" : "file",\r\n  "createTime" : 1764835885763,\r\n  "updateTime" : 1764899861603,\r\n  "lock" : null,\r\n  "createBy" : "admin",\r\n  "updateBy" : "admin",\r\n  "path" : "oss/file",\r\n  "method" : "GET",\r\n  "parameters" : [ {\r\n    "name" : "filename",\r\n    "value" : "alice-macaw.jpg",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : {\r\n    "name" : "",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "msg",\r\n      "value" : "参数[filename]为必填项",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "data",\r\n      "value" : "",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Object",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "status",\r\n      "value" : "1",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  }\r\n}\r\n================================\r\nimport response\r\nimport java.io.InputStream\r\nimport java.io.OutputStream\r\nimport com.amazonaws.services.s3.model.S3Object\r\nimport org.ssssssss.magicapi.core.context.RequestContext\r\n\r\nimport "com.quick.boot.modules.common.files.FilesStorageService" as filesStorageService\r\n\r\nvar sysFile = db.camel().table(\'sys_files\')\r\n    .columns("bucket_name", "dir", "file_name")\r\n    .where()\r\n    .eq(\'file_name\', filename)\r\n    .selectOne()\r\n\r\nvar res = RequestContext.getHttpServletResponse().getResponse()\r\nif (sysFile == null) {\r\n    res.setStatus(404)\r\n    return response.end()\r\n}\r\n\r\ntry (S3Object s3Object = filesStorageService.getObject(sysFile.bucketName, sysFile.dir, filename)) {\r\n    res.setContentType(sysFile.type);\r\n    InputStream inputStream = s3Object.getObjectContent();\r\n    OutputStream outputStream = res.getOutputStream();\r\n    inputStream.transferTo(outputStream);\r\n} finally {\r\n    return response.end()\r\n}'),
	('magic-api/api/业务功能/文件管理/group.json', '{\r\n  "properties" : { },\r\n  "id" : "7f73f510bd0b4cc5b689cfe01d745947",\r\n  "name" : "文件管理",\r\n  "type" : "api",\r\n  "parentId" : "712c7134f4be4a1eaa3a17fd241f4549",\r\n  "path" : "files",\r\n  "createTime" : null,\r\n  "updateTime" : 1764835778711,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "paths" : [ ],\r\n  "options" : [ ]\r\n}'),
	('magic-api/api/业务功能/文件管理/page.ms', '{\r\n  "properties" : { },\r\n  "id" : "54c7f77c15d4464aba6484edeb5b3711",\r\n  "script" : null,\r\n  "groupId" : "7f73f510bd0b4cc5b689cfe01d745947",\r\n  "name" : "page",\r\n  "createTime" : 1764835827617,\r\n  "updateTime" : 1764903187172,\r\n  "lock" : null,\r\n  "createBy" : "admin",\r\n  "updateBy" : "admin",\r\n  "path" : "page",\r\n  "method" : "GET",\r\n  "parameters" : [ {\r\n    "name" : "type",\r\n    "value" : "image/jpeg",\r\n    "description" : null,\r\n    "required" : false,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : null,\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  }, {\r\n    "name" : "original",\r\n    "value" : null,\r\n    "description" : null,\r\n    "required" : false,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : null,\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": {\\n        \\"total\\": \\"16\\",\\n        \\"items\\": [\\n            {\\n                \\"id\\": \\"1324\\",\\n                \\"fileName\\": \\"alice-macaw.jpg\\",\\n                \\"bucketName\\": \\"local\\",\\n                \\"dir\\": \\"0\\",\\n                \\"original\\": \\"alice-macaw.jpg\\",\\n                \\"type\\": \\"image/jpeg\\",\\n                \\"fileSize\\": \\"117840\\",\\n                \\"projectId\\": \\"0\\",\\n                \\"createBy\\": \\"admin\\",\\n                \\"updateBy\\": \\" \\",\\n                \\"createTime\\": \\"2025-12-04 15:20:29\\",\\n                \\"updateTime\\": \\"2025-12-05 09:56:39\\",\\n                \\"delFlag\\": \\"0\\"\\n            },\\n            {\\n                \\"id\\": \\"1234213\\",\\n                \\"fileName\\": \\"default-avatar.jpg\\",\\n                \\"bucketName\\": \\"local\\",\\n                \\"dir\\": \\"0\\",\\n                \\"original\\": \\"default-avatar.jpg\\",\\n                \\"type\\": \\"image/jpeg\\",\\n                \\"fileSize\\": \\"117840\\",\\n                \\"projectId\\": \\"0\\",\\n                \\"createBy\\": \\"admin\\",\\n                \\"updateBy\\": \\" \\",\\n                \\"createTime\\": \\"2025-12-04 16:07:13\\",\\n                \\"updateTime\\": \\"2025-12-05 09:56:39\\",\\n                \\"delFlag\\": \\"0\\"\\n            },\\n            {\\n                \\"id\\": \\"1995629951648542721\\",\\n                \\"fileName\\": \\"13409172a34548e8aca1e688e67f3030.jpg\\",\\n                \\"bucketName\\": \\"local\\",\\n                \\"dir\\": \\"0\\",\\n                \\"original\\": \\"610121199002282868.jpg\\",\\n                \\"type\\": \\"image/jpeg\\",\\n                \\"fileSize\\": \\"117840\\",\\n                \\"projectId\\": \\"0\\",\\n                \\"createBy\\": \\"admin\\",\\n                \\"updateBy\\": \\" \\",\\n                \\"createTime\\": \\"2025-12-02 07:03:52\\",\\n                \\"updateTime\\": \\"2025-12-05 09:56:40\\",\\n                \\"delFlag\\": \\"0\\"\\n            },\\n            {\\n                \\"id\\": \\"1995630357447491586\\",\\n                \\"fileName\\": \\"a38ac50071d04235bc82c53d98e4cecc.jpg\\",\\n                \\"bucketName\\": \\"local\\",\\n                \\"dir\\": \\"0\\",\\n                \\"original\\": \\"610121199002282868.jpg\\",\\n                \\"type\\": \\"image/jpeg\\",\\n                \\"fileSize\\": \\"117840\\",\\n                \\"projectId\\": \\"0\\",\\n                \\"createBy\\": \\"admin\\",\\n                \\"updateBy\\": \\" \\",\\n                \\"createTime\\": \\"2025-12-02 07:05:29\\",\\n                \\"updateTime\\": \\"2025-12-05 09:56:40\\",\\n                \\"delFlag\\": \\"0\\"\\n            },\\n            {\\n                \\"id\\": \\"1995632997631795202\\",\\n                \\"fileName\\": \\"4c2c7c0e0110495d993d10cd8cee27bd.jpg\\",\\n                \\"bucketName\\": \\"local\\",\\n                \\"dir\\": \\"0\\",\\n                \\"original\\": \\"610121199002282868.jpg\\",\\n                \\"type\\": \\"image/jpeg\\",\\n                \\"fileSize\\": \\"117840\\",\\n                \\"projectId\\": \\"0\\",\\n                \\"createBy\\": \\"admin\\",\\n                \\"updateBy\\": \\" \\",\\n                \\"createTime\\": \\"2025-12-02 07:15:58\\",\\n                \\"updateTime\\": \\"2025-12-05 09:56:40\\",\\n                \\"delFlag\\": \\"0\\"\\n            },\\n            {\\n                \\"id\\": \\"1995634757259763713\\",\\n                \\"fileName\\": \\"9bc3a58b4c0c4ce7aae3f82905234b52.jpg\\",\\n                \\"bucketName\\": \\"local\\",\\n                \\"dir\\": \\"0\\",\\n                \\"original\\": \\"610121199002282868.jpg\\",\\n                \\"type\\": \\"image/jpeg\\",\\n                \\"fileSize\\": \\"124246\\",\\n                \\"projectId\\": \\"0\\",\\n                \\"createBy\\": \\"admin\\",\\n                \\"updateBy\\": \\" \\",\\n                \\"createTime\\": \\"2025-12-02 07:22:58\\",\\n                \\"updateTime\\": \\"2025-12-05 09:56:41\\",\\n                \\"delFlag\\": \\"0\\"\\n            },\\n            {\\n                \\"id\\": \\"1995636093682528257\\",\\n                \\"fileName\\": \\"0652c84da33d4c37906ee2d51ef1d839.jpg\\",\\n                \\"bucketName\\": \\"local\\",\\n                \\"dir\\": \\"0\\",\\n                \\"original\\": \\"610121199002282868.jpg\\",\\n                \\"type\\": \\"image/jpeg\\",\\n                \\"fileSize\\": \\"117840\\",\\n                \\"projectId\\": \\"0\\",\\n                \\"createBy\\": \\"admin\\",\\n                \\"updateBy\\": \\" \\",\\n                \\"createTime\\": \\"2025-12-02 07:28:17\\",\\n                \\"updateTime\\": \\"2025-12-05 09:56:41\\",\\n                \\"delFlag\\": \\"0\\"\\n            },\\n            {\\n                \\"id\\": \\"1995701523835006978\\",\\n                \\"fileName\\": \\"af607bbda78e4d3c8adaa3d9cf0ec169.jpg\\",\\n                \\"bucketName\\": \\"local\\",\\n                \\"dir\\": \\"0\\",\\n                \\"original\\": \\"610121199002282868.jpg\\",\\n                \\"type\\": \\"image/jpeg\\",\\n                \\"fileSize\\": \\"117840\\",\\n                \\"projectId\\": \\"0\\",\\n                \\"createBy\\": \\"admin\\",\\n                \\"updateBy\\": \\" \\",\\n                \\"createTime\\": \\"2025-12-02 11:48:16\\",\\n                \\"updateTime\\": \\"2025-12-05 09:56:42\\",\\n                \\"delFlag\\": \\"0\\"\\n            },\\n            {\\n                \\"id\\": \\"1996505311135154179\\",\\n                \\"fileName\\": \\"/2025/12/04/1996505311135154177.jpg\\",\\n                \\"bucketName\\": \\"local\\",\\n                \\"dir\\": \\"0\\",\\n                \\"original\\": \\"610121199002282868.jpg\\",\\n                \\"type\\": \\"image/jpeg\\",\\n                \\"fileSize\\": \\"416247\\",\\n                \\"projectId\\": \\"0\\",\\n                \\"createBy\\": \\"admin\\",\\n                \\"updateBy\\": \\"admin\\",\\n                \\"createTime\\": \\"2025-12-04 17:02:14\\",\\n                \\"updateTime\\": \\"2025-12-05 09:56:42\\",\\n                \\"delFlag\\": \\"0\\"\\n            },\\n            {\\n                \\"id\\": \\"1996505697954840580\\",\\n                \\"fileName\\": \\"/2025/12/04/1996505697954840578.jpg\\",\\n                \\"bucketName\\": \\"local\\",\\n                \\"dir\\": \\"0\\",\\n                \\"original\\": \\"610121199002282868.jpg\\",\\n                \\"type\\": \\"image/jpeg\\",\\n                \\"fileSize\\": \\"416247\\",\\n                \\"projectId\\": \\"0\\",\\n                \\"createBy\\": \\"admin\\",\\n                \\"updateBy\\": \\"admin\\",\\n                \\"createTime\\": \\"2025-12-04 17:03:46\\",\\n                \\"updateTime\\": \\"2025-12-05 09:56:43\\",\\n                \\"delFlag\\": \\"0\\"\\n            }\\n        ]\\n    },\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nprojectId = ProjectContextHolder.getProjectId()\r\nreturn db.camel().page("""\r\n    select *\r\n    from sys_files\r\n    where\r\n    project_id = #{projectId}\r\n    ?{type, and type = #{type}}\r\n    ?{original, and original like #{"%" + original + "%"}}\r\n""")'),
	('magic-api/api/业务功能/文件管理/removeBatchByIds.ms', '{\r\n  "properties" : { },\r\n  "id" : "7d963f5d328b430abf0d0377da33af58",\r\n  "script" : null,\r\n  "groupId" : "7f73f510bd0b4cc5b689cfe01d745947",\r\n  "name" : "removeBatchByIds",\r\n  "createTime" : 1764835846829,\r\n  "updateTime" : 1764901864532,\r\n  "lock" : null,\r\n  "createBy" : "admin",\r\n  "updateBy" : "admin",\r\n  "path" : "",\r\n  "method" : "DELETE",\r\n  "parameters" : [ {\r\n    "name" : "ids",\r\n    "value" : "1,2,3",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_files where id in (#{ids.split(",")})\');'),
	('magic-api/api/业务功能/文件管理/removeById.ms', '{\r\n  "properties" : { },\r\n  "id" : "caae4cd7bc12447d9e06035d4de7ea53",\r\n  "script" : null,\r\n  "groupId" : "7f73f510bd0b4cc5b689cfe01d745947",\r\n  "name" : "removeById",\r\n  "createTime" : 1764835863634,\r\n  "updateTime" : 1764901808783,\r\n  "lock" : null,\r\n  "createBy" : "admin",\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "DELETE",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_files where id=#{path.id}\');'),
	('magic-api/api/业务功能/文件管理/upload.ms', '{\r\n  "properties" : { },\r\n  "id" : "825f646a874c4900876fa3f494aa27a1",\r\n  "script" : null,\r\n  "groupId" : "7f73f510bd0b4cc5b689cfe01d745947",\r\n  "name" : "upload",\r\n  "createTime" : 1764397567621,\r\n  "updateTime" : 1764899270008,\r\n  "lock" : "0",\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "upload",\r\n  "method" : "POST",\r\n  "parameters" : [ {\r\n    "name" : "file",\r\n    "value" : { },\r\n    "description" : null,\r\n    "required" : false,\r\n    "dataType" : "MultipartFile",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : null,\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  } ],\r\n  "options" : [ {\r\n    "name" : "permission",\r\n    "value" : "api.file.upload",\r\n    "description" : "允许拥有该权限的访问",\r\n    "required" : false,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : null,\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  } ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": {\\n        \\"filename\\": \\"/2025/12/05/1996758167490658305.jpg\\",\\n        \\"url\\": \\"/api/files/oss/file?filename=/2025/12/05/1996758167490658305.jpg\\"\\n    },\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : {\r\n    "name" : "",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "msg",\r\n      "value" : "success",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "data",\r\n      "value" : "",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Object",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ {\r\n        "name" : "filename",\r\n        "value" : "/2025/12/05/1996757187881598977.jpg",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      }, {\r\n        "name" : "url",\r\n        "value" : "/api/files/oss/file?filename=/2025/12/05/1996757187881598977.jpg",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      } ]\r\n    }, {\r\n      "name" : "status",\r\n      "value" : "0",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  }\r\n}\r\n================================\r\nimport request\r\nimport java.io.InputStream\r\nimport java.time.LocalDate\r\nimport com.quick.boot.modules.common.constant.DatePatternConstants\r\nimport com.baomidou.mybatisplus.core.toolkit.IdWorker\r\nimport org.apache.commons.io.FilenameUtils\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nimport "com.quick.boot.modules.common.files.FilesStorageService" as filesStorageService\r\nimport "com.quick.boot.modules.common.files.FilesProperties" as properties\r\n\r\nvar file = request.getFile("file")\r\nif (file == null || file.isEmpty()) {\r\n    exit 2, "上传文件不能为空"\r\n}\r\n\r\nvar original = file.getOriginalFilename()\r\nvar filename = LocalDate.now().format(DatePatternConstants.DTF_DIRS) + IdWorker.getIdStr() + "." + FilenameUtils.getExtension(original)\r\n\r\nvar bucket = properties.getBucketName()\r\nvar contentType = file.getContentType()\r\ntry (InputStream inputStream = file.getInputStream()) {\r\n    filesStorageService.putObject(bucket, filename, inputStream, contentType);\r\n    db.table(\'sys_files\').primary(\'id\').insert({\r\n        id: IdWorker.getId(),\r\n        file_name: filename,\r\n        bucket_name: bucket,\r\n        original: original,\r\n        file_size: file.getSize(),\r\n        type: contentType,\r\n        project_id: ProjectContextHolder.getProjectId(),\r\n        dir: ProjectContextHolder.getProjectId().toString()\r\n    })\r\n} catch (e) {\r\n    exit 1, e.getMessage();\r\n}\r\n\r\nreturn {\r\n    filename: filename,\r\n    url: String.format("/api/files/oss/file?filename=%s", filename)\r\n}'),
	('magic-api/api/系统管理/', 'this is directory'),
	('magic-api/api/系统管理/group.json', '{\r\n  "properties" : { },\r\n  "id" : "509da4edcdb748baa11910a70584a1c2",\r\n  "name" : "系统管理",\r\n  "type" : "api",\r\n  "parentId" : "0",\r\n  "path" : "",\r\n  "createTime" : null,\r\n  "updateTime" : 1764439302289,\r\n  "createBy" : null,\r\n  "updateBy" : null,\r\n  "paths" : [ ],\r\n  "options" : [ ]\r\n}'),
	('magic-api/api/系统管理/权限管理/', 'this is directory'),
	('magic-api/api/系统管理/权限管理/getById.ms', '{\r\n  "properties" : { },\r\n  "id" : "be4ae63c58fb4711a391506331ae7669",\r\n  "script" : null,\r\n  "groupId" : "0a335a77184244deaa7ce69d6736b6fb",\r\n  "name" : "getById",\r\n  "createTime" : 1764398231691,\r\n  "updateTime" : 1764901756606,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "GET",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.camel().table(\'sys_perms\')\r\n    .where()\r\n    .eq(\'id\', path.id)\r\n    .selectOne()'),
	('magic-api/api/系统管理/权限管理/group.json', '{\r\n  "properties" : { },\r\n  "id" : "0a335a77184244deaa7ce69d6736b6fb",\r\n  "name" : "权限管理",\r\n  "type" : "api",\r\n  "parentId" : "509da4edcdb748baa11910a70584a1c2",\r\n  "path" : "perms",\r\n  "createTime" : null,\r\n  "updateTime" : 1764835081615,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "paths" : [ ],\r\n  "options" : [ ]\r\n}'),
	('magic-api/api/系统管理/权限管理/removeBatchByIds.ms', '{\r\n  "properties" : { },\r\n  "id" : "1151f6aae5504337a7d7d16c88134138",\r\n  "script" : null,\r\n  "groupId" : "0a335a77184244deaa7ce69d6736b6fb",\r\n  "name" : "removeBatchByIds",\r\n  "createTime" : 1764398227932,\r\n  "updateTime" : 1764901853037,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "",\r\n  "method" : "DELETE",\r\n  "parameters" : [ {\r\n    "name" : "ids",\r\n    "value" : "1,2,3",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_perms where id in (#{ids.split(",")})\');'),
	('magic-api/api/系统管理/权限管理/removeById.ms', '{\r\n  "properties" : { },\r\n  "id" : "866fff0f51ed45b3a4ac986680e18943",\r\n  "script" : null,\r\n  "groupId" : "0a335a77184244deaa7ce69d6736b6fb",\r\n  "name" : "removeById",\r\n  "createTime" : 1764398229720,\r\n  "updateTime" : 1764901761958,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "DELETE",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_perms where id=#{path.id}\');'),
	('magic-api/api/系统管理/权限管理/save.ms', '{\r\n  "properties" : { },\r\n  "id" : "05fd298bc08c4d0787c388fb2f968c6a",\r\n  "script" : null,\r\n  "groupId" : "0a335a77184244deaa7ce69d6736b6fb",\r\n  "name" : "save",\r\n  "createTime" : 1764398219773,\r\n  "updateTime" : 1764835095722,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "",\r\n  "method" : "POST",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.camel().table(\'sys_perms\').primary(\'id\').insert(body)'),
	('magic-api/api/系统管理/权限管理/updateById.ms', '{\r\n  "properties" : { },\r\n  "id" : "267b4d8487204959b2f302a83091db35",\r\n  "script" : null,\r\n  "groupId" : "0a335a77184244deaa7ce69d6736b6fb",\r\n  "name" : "updateById",\r\n  "createTime" : 1764398296209,\r\n  "updateTime" : 1764901766360,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "PUT",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nbody.id = path.id\r\nreturn db.camel().table(\'sys_perms\').primary(\'id\').update(body)'),
	('magic-api/api/系统管理/用户管理/', 'this is directory'),
	('magic-api/api/系统管理/用户管理/getProjectUser.ms', '{\r\n  "properties" : { },\r\n  "id" : "ce0d2e14c6e147a88290b20728c63200",\r\n  "script" : null,\r\n  "groupId" : "3906d13dcadd4b80b8699ac958e37b72",\r\n  "name" : "getProjectUser",\r\n  "createTime" : 1764398554709,\r\n  "updateTime" : 1764901794254,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "GET",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1994796990745354241",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": [],\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : {\r\n    "name" : "",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "msg",\r\n      "value" : "success",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "data",\r\n      "value" : "",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Array",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "status",\r\n      "value" : "0",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  }\r\n}\r\n================================\r\nvar val = db.camel().select("""\r\nSELECT\r\n up.id,\r\n up.user_id,\r\n up.user_type,\r\n GROUP_CONCAT(ur.role_id ORDER BY ur.role_id SEPARATOR \',\') AS roles,\r\n up.create_time\r\nFROM\r\n sys_projects_users up\r\nJOIN sys_user_role ur ON up.user_id = ur.user_id AND ur.project_id = up.project_id\r\nWHERE\r\n ur.del_flag = \'0\' AND up.del_flag = \'0\' AND up.id = #{path.id}\r\nGROUP BY\r\n up.id, up.user_id, up.user_type\r\nORDER BY\r\n up.create_time DESC\r\n""")\r\n\r\nreturn val'),
	('magic-api/api/系统管理/用户管理/group.json', '{\r\n  "properties" : { },\r\n  "id" : "3906d13dcadd4b80b8699ac958e37b72",\r\n  "name" : "用户管理",\r\n  "type" : "api",\r\n  "parentId" : "509da4edcdb748baa11910a70584a1c2",\r\n  "path" : "users",\r\n  "createTime" : null,\r\n  "updateTime" : 1764835182101,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "paths" : [ ],\r\n  "options" : [ ]\r\n}'),
	('magic-api/api/系统管理/用户管理/info.ms', '{\r\n  "properties" : { },\r\n  "id" : "31fc131ae64a43a9b8720d053d865f0e",\r\n  "script" : null,\r\n  "groupId" : "3906d13dcadd4b80b8699ac958e37b72",\r\n  "name" : "info",\r\n  "createTime" : 1764399002891,\r\n  "updateTime" : 1764835201297,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "info",\r\n  "method" : "GET",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": {\\n        \\"userId\\": null,\\n        \\"username\\": \\"admin\\",\\n        \\"avatar\\": \\"/files/alice-macaw.jpg\\",\\n        \\"accessToken\\": null\\n    },\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport cn.dev33.satoken.stp.SaTokenInfo\r\nimport cn.dev33.satoken.stp.StpUtil\r\n\r\nSaTokenInfo tokenInfo = StpUtil.getTokenInfo()\r\nvar val = db.camel().table(\'sys_users\')\r\n    .where()\r\n    .eq(\'id\', tokenInfo.loginId)\r\n    .selectOne()\r\n\r\nif (Objects.isNull(val)) {\r\n    exit 1, "查询失败";\r\n}\r\n\r\nreturn {\r\n    userId: val.id,\r\n    username: val.username,\r\n    avatar: val.avatar,\r\n    accessToken: tokenInfo.tokenValue\r\n}'),
	('magic-api/api/系统管理/用户管理/list.ms', '{\r\n  "properties" : { },\r\n  "id" : "c0e1fc269e2e49f29699b0fd5cdc23f7",\r\n  "script" : null,\r\n  "groupId" : "3906d13dcadd4b80b8699ac958e37b72",\r\n  "name" : "list",\r\n  "createTime" : 1764399011409,\r\n  "updateTime" : 1764835204323,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "list",\r\n  "method" : "GET",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": {},\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nvar val = db.camel().select("""\r\n    select id, username, create_time\r\n    from sys_users\r\n    where\r\n    1=1\r\n    ?{userId, and id = #{userId}}\r\n    ?{username, and username like #{"%" + username + "%"}}\r\n    order by id desc\r\n""")\r\n\r\nreturn val'),
	('magic-api/api/系统管理/用户管理/notInProject.ms', '{\r\n  "properties" : { },\r\n  "id" : "496e3d6637464fa5a0e5c906339c347c",\r\n  "script" : null,\r\n  "groupId" : "3906d13dcadd4b80b8699ac958e37b72",\r\n  "name" : "notInProject",\r\n  "createTime" : 1764399034804,\r\n  "updateTime" : 1764835209809,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "not-in-project",\r\n  "method" : "GET",\r\n  "parameters" : [ {\r\n    "name" : "projectId",\r\n    "value" : "123",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "Long",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : null,\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": [\\n        {\\n            \\"id\\": \\"1\\",\\n            \\"username\\": \\"admin\\",\\n            \\"avatar\\": \\"/files/alice-macaw.jpg\\"\\n        }\\n    ],\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nvar val = db.camel().select("""\r\n    select u.id, u.username, u.avatar, u.create_time\r\n    from sys_users u\r\n    left join sys_projects_users pu\r\n    on u.id = pu.user_id\r\n    and pu.project_id = #{projectId}\r\n    where pu.user_id is null\r\n""")\r\n\r\nreturn val'),
	('magic-api/api/系统管理/用户管理/projectsUsersPage.ms', '{\r\n  "properties" : { },\r\n  "id" : "35ecd6fbe0834c3c89acc5db2657c860",\r\n  "script" : null,\r\n  "groupId" : "3906d13dcadd4b80b8699ac958e37b72",\r\n  "name" : "projectsUsersPage",\r\n  "createTime" : 1764399058307,\r\n  "updateTime" : 1764835213154,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "page",\r\n  "method" : "GET",\r\n  "parameters" : [ {\r\n    "name" : "projectId",\r\n    "value" : "1994154455337271298",\r\n    "description" : null,\r\n    "required" : false,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : null,\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": [\\n        {\\n            \\"id\\": \\"1994154455354048513\\",\\n            \\"userId\\": \\"1\\",\\n            \\"username\\": \\"admin\\",\\n            \\"userType\\": \\"admin\\",\\n            \\"createTime\\": \\"2025-11-28 05:20:46\\",\\n            \\"roleNames\\": null\\n        }\\n    ],\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nprojectId = ProjectContextHolder.getProjectId()\r\nvar val = db.camel().page("""\r\n    SELECT\r\n     up.id,\r\n     up.user_id,\r\n     u.username,\r\n     up.user_type,\r\n     up.create_time,\r\n    GROUP_CONCAT(DISTINCT r.role_name ORDER BY r.role_name SEPARATOR \',\') AS role_names\r\n    FROM\r\n     sys_users u\r\n    JOIN sys_projects_users up ON u.id = up.user_id\r\n    LEFT JOIN sys_user_role ur ON ur.user_id = up.user_id AND ur.project_id = up.project_id AND ur.del_flag = \'0\'\r\n    LEFT JOIN sys_roles r ON r.id = ur.role_id\r\n    WHERE\r\n     u.del_flag = \'0\'\r\n     AND up.del_flag = \'0\'\r\n     AND up.project_id = #{projectId}\r\n     ?{username, AND username LIKE #{"%" + username + "%"}}\r\n    GROUP BY\r\n     up.id, up.user_id, u.username, up.user_type, up.create_time\r\n    ORDER BY\r\n     up.create_time DESC\r\n""")\r\n\r\nreturn val'),
	('magic-api/api/系统管理/用户管理/removeBatchByIds.ms', '{\r\n  "properties" : { },\r\n  "id" : "773b201a9ab9481c85810320929427d0",\r\n  "script" : null,\r\n  "groupId" : "3906d13dcadd4b80b8699ac958e37b72",\r\n  "name" : "removeBatchByIds",\r\n  "createTime" : 1764398554721,\r\n  "updateTime" : 1764901860277,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "",\r\n  "method" : "DELETE",\r\n  "parameters" : [ {\r\n    "name" : "ids",\r\n    "value" : "1,2,3",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_projects_users where id in (#{ids.split(",")})\');'),
	('magic-api/api/系统管理/用户管理/removeById.ms', '{\r\n  "properties" : { },\r\n  "id" : "c093a30e59e34b8faf227ed72d2c7e28",\r\n  "script" : null,\r\n  "groupId" : "3906d13dcadd4b80b8699ac958e37b72",\r\n  "name" : "removeById",\r\n  "createTime" : 1764398554715,\r\n  "updateTime" : 1764901798106,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "DELETE",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_projects_users where id=#{path.id}\');'),
	('magic-api/api/系统管理/用户管理/saveProjectUser.ms', '{\r\n  "properties" : { },\r\n  "id" : "35ac0090424c4328adf766f3b1c9e994",\r\n  "script" : null,\r\n  "groupId" : "3906d13dcadd4b80b8699ac958e37b72",\r\n  "name" : "saveProjectUser",\r\n  "createTime" : 1764398554728,\r\n  "updateTime" : 1764835222228,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "",\r\n  "method" : "POST",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "{\\"projectId\\":\\"1994154455337271298\\",\\"userType\\":\\"user\\",\\"userId\\":\\"2\\",\\"roles\\":\\"1994796403488268290\\"}",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nbody.projectId = ProjectContextHolder.getProjectId()\r\nvar val = db.camel().table(\'sys_projects_users\')\r\n    .where()\r\n    .eq(\'project_id\', body.projectId)\r\n    .eq(\'user_id\', body.userId)\r\n    .selectOne()\r\n\r\nif (val != null) {\r\n    exit 1, "用户已存在该项目中"\r\n}\r\n\r\ndb.camel().table(\'sys_projects_users\').primary(\'id\').insert({\r\n    project_id: body.projectId,\r\n    user_id: body.userId,\r\n    user_type: body.userType\r\n})\r\n\r\nif (!"user".equals(body.userType)) {\r\n    return true\r\n}\r\n\r\nvar roles = body.roles.split(",");\r\nfor (roleId in roles) {\r\n    db.camel().table(\'sys_user_role\').primary(\'id\').insert({\r\n        project_id: body.projectId,\r\n        user_id: body.userId,\r\n        role_id: roleId\r\n    })\r\n}\r\n\r\nreturn true'),
	('magic-api/api/系统管理/用户管理/updateById.ms', '{\r\n  "properties" : { },\r\n  "id" : "a7932c13c8f648aeb0709244fc0e40f4",\r\n  "script" : null,\r\n  "groupId" : "3906d13dcadd4b80b8699ac958e37b72",\r\n  "name" : "updateById",\r\n  "createTime" : 1764398554733,\r\n  "updateTime" : 1764901801886,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "PUT",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "{\\"id\\":\\"1994796990745354241\\",\\"userId\\":\\"2\\",\\"userType\\":\\"user\\",\\"result\\":null,\\"roles\\":\\"1994796403488268290\\"}",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"系统内部出现错误\\",\\n    \\"data\\": {},\\n    \\"status\\": 2\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nbody.id = path.id\r\n\r\nvar val = db.camel().table(\'sys_projects_users\')\r\n    .where()\r\n    .eq(\'id\', path.id)\r\n    .selectOne()\r\n\r\nif (val == null) {\r\n    exit 1, "用户不存在"\r\n}\r\n\r\ndb.camel().table(\'sys_projects_users\').primary(\'id\').update({\r\n    id: val.id,\r\n    user_type: body.userType\r\n})\r\n\r\ndb.update(\'delete from sys_user_role where user_id=#{val.userId}\');\r\n\r\nif (!"user".equals(body.userType)) {\r\n    return true\r\n}\r\n\r\nvar roles = body.roles.split(",");\r\nfor (roleId in roles) {\r\n    db.camel().table(\'sys_user_role\').primary(\'id\').insert({\r\n        user_id: val.userId,\r\n        role_id: roleId\r\n    })\r\n}\r\n\r\nreturn true'),
	('magic-api/api/系统管理/菜单管理/', 'this is directory'),
	('magic-api/api/系统管理/菜单管理/getById.ms', '{\r\n  "properties" : { },\r\n  "id" : "be8c8c955c8a4f40933bd0d638a4ee35",\r\n  "script" : null,\r\n  "groupId" : "3af568c7375b429c873ea1b12b601010",\r\n  "name" : "getById",\r\n  "createTime" : 1764397825417,\r\n  "updateTime" : 1764901728657,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "GET",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": {},\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : {\r\n    "name" : "",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "msg",\r\n      "value" : "success",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "data",\r\n      "value" : "",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Object",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "status",\r\n      "value" : "0",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  }\r\n}\r\n================================\r\nreturn db.camel().table(\'sys_menus\')\r\n    .where()\r\n    .eq(\'id\', path.id)\r\n    .selectOne()'),
	('magic-api/api/系统管理/菜单管理/getTree.ms', '{\r\n  "properties" : { },\r\n  "id" : "23880d14ae0a4fd6835ab1ed11ff9817",\r\n  "script" : null,\r\n  "groupId" : "3af568c7375b429c873ea1b12b601010",\r\n  "name" : "getTree",\r\n  "createTime" : 1764397694648,\r\n  "updateTime" : 1764900648719,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "tree",\r\n  "method" : "GET",\r\n  "parameters" : [ {\r\n    "name" : "projectId",\r\n    "value" : "1994154455337271298",\r\n    "description" : null,\r\n    "required" : false,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 1",\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": [\\n        {\\n            \\"id\\": \\"1994157431292428290\\",\\n            \\"name\\": \\"证书管理\\",\\n            \\"parentId\\": \\"-1\\",\\n            \\"menuType\\": \\"menu\\",\\n            \\"status\\": \\"1\\",\\n            \\"projectId\\": \\"1994154455337271298\\",\\n            \\"icon\\": \\"fa-solid fa-user-shield\\",\\n            \\"pageId\\": \\"1994154756995809282\\",\\n            \\"permission\\": null,\\n            \\"sortOrder\\": 1,\\n            \\"visible\\": null,\\n            \\"createBy\\": \\"admin\\",\\n            \\"updateBy\\": \\" \\",\\n            \\"createTime\\": \\"2025-11-28 05:32:36\\",\\n            \\"updateTime\\": \\"2025-11-28 10:56:19\\",\\n            \\"delFlag\\": \\"0\\",\\n            \\"pageName\\": \\"证书管理\\",\\n            \\"children\\": [\\n                {\\n                    \\"id\\": \\"1994157501085646849\\",\\n                    \\"name\\": \\"证书录入\\",\\n                    \\"parentId\\": \\"1994157431292428290\\",\\n                    \\"menuType\\": \\"menu\\",\\n                    \\"status\\": \\"1\\",\\n                    \\"projectId\\": \\"1994154455337271298\\",\\n                    \\"icon\\": \\"fa fa-at\\",\\n                    \\"pageId\\": \\"1994154865049468930\\",\\n                    \\"permission\\": null,\\n                    \\"sortOrder\\": 1,\\n                    \\"visible\\": null,\\n                    \\"createBy\\": \\"admin\\",\\n                    \\"updateBy\\": \\"admin\\",\\n                    \\"createTime\\": \\"2025-11-28 05:32:53\\",\\n                    \\"updateTime\\": \\"2025-11-29 22:54:11\\",\\n                    \\"delFlag\\": \\"0\\",\\n                    \\"pageName\\": \\"证书录入\\",\\n                    \\"children\\": []\\n                },\\n                {\\n                    \\"id\\": \\"1995079777419350018\\",\\n                    \\"name\\": \\"二级平行\\",\\n                    \\"parentId\\": \\"1994157431292428290\\",\\n                    \\"menuType\\": \\"menu\\",\\n                    \\"status\\": \\"1\\",\\n                    \\"projectId\\": \\"1994154455337271298\\",\\n                    \\"icon\\": null,\\n                    \\"pageId\\": \\"1994154865049468930\\",\\n                    \\"permission\\": null,\\n                    \\"sortOrder\\": 1,\\n                    \\"visible\\": null,\\n                    \\"createBy\\": \\"admin\\",\\n                    \\"updateBy\\": \\"admin\\",\\n                    \\"createTime\\": \\"2025-11-30 18:37:40\\",\\n                    \\"updateTime\\": \\"2025-11-30 18:37:40\\",\\n                    \\"delFlag\\": \\"0\\",\\n                    \\"pageName\\": \\"证书录入\\",\\n                    \\"children\\": [\\n                        {\\n                            \\"id\\": \\"1995079837381120001\\",\\n                            \\"name\\": \\"三级\\",\\n                            \\"parentId\\": \\"1995079777419350018\\",\\n                            \\"menuType\\": \\"menu\\",\\n                            \\"status\\": \\"1\\",\\n                            \\"projectId\\": \\"1994154455337271298\\",\\n                            \\"icon\\": null,\\n                            \\"pageId\\": \\"1994154865049468930\\",\\n                            \\"permission\\": null,\\n                            \\"sortOrder\\": 1,\\n                            \\"visible\\": null,\\n                            \\"createBy\\": \\"admin\\",\\n                            \\"updateBy\\": \\"admin\\",\\n                            \\"createTime\\": \\"2025-11-30 18:37:55\\",\\n                            \\"updateTime\\": \\"2025-11-30 18:37:55\\",\\n                            \\"delFlag\\": \\"0\\",\\n                            \\"pageName\\": \\"证书录入\\",\\n                            \\"children\\": []\\n                        }\\n                    ]\\n                }\\n            ]\\n        }\\n    ],\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : {\r\n    "name" : "",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "msg",\r\n      "value" : "success",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "data",\r\n      "value" : "",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Array",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ {\r\n        "name" : "",\r\n        "value" : "",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "Object",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ {\r\n          "name" : "id",\r\n          "value" : "1994157431292428290",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "name",\r\n          "value" : "证书管理",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "parentId",\r\n          "value" : "-1",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "menuType",\r\n          "value" : "menu",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "path",\r\n          "value" : "null",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "Object",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "status",\r\n          "value" : "1",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "projectId",\r\n          "value" : "1994154455337271298",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "icon",\r\n          "value" : "fa-solid fa-user-shield",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "pageId",\r\n          "value" : "1994154756995809282",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "pageName",\r\n          "value" : "证书管理",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "permission",\r\n          "value" : "null",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "Object",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "sortOrder",\r\n          "value" : "1",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "Integer",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "createTime",\r\n          "value" : "2025-11-28 05:32:36",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "children",\r\n          "value" : "",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "Array",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ {\r\n            "name" : "",\r\n            "value" : "",\r\n            "description" : "",\r\n            "required" : false,\r\n            "dataType" : "Object",\r\n            "type" : null,\r\n            "defaultValue" : null,\r\n            "validateType" : "",\r\n            "error" : "",\r\n            "expression" : "",\r\n            "children" : [ {\r\n              "name" : "id",\r\n              "value" : "1994157501085646849",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "String",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "name",\r\n              "value" : "证书录入",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "String",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "parentId",\r\n              "value" : "1994157431292428290",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "String",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "menuType",\r\n              "value" : "menu",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "String",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "path",\r\n              "value" : "null",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "Object",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "status",\r\n              "value" : "1",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "String",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "projectId",\r\n              "value" : "1994154455337271298",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "String",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "icon",\r\n              "value" : "fa fa-paint-brush",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "String",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "pageId",\r\n              "value" : "1994154865049468930",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "String",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "pageName",\r\n              "value" : "证书录入",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "String",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "permission",\r\n              "value" : "null",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "Object",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "sortOrder",\r\n              "value" : "1",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "Integer",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "createTime",\r\n              "value" : "2025-11-28 05:32:53",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "String",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            }, {\r\n              "name" : "children",\r\n              "value" : "",\r\n              "description" : "",\r\n              "required" : false,\r\n              "dataType" : "Array",\r\n              "type" : null,\r\n              "defaultValue" : null,\r\n              "validateType" : "",\r\n              "error" : "",\r\n              "expression" : "",\r\n              "children" : [ ]\r\n            } ]\r\n          } ]\r\n        } ]\r\n      } ]\r\n    }, {\r\n      "name" : "status",\r\n      "value" : "0",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  }\r\n}\r\n================================\r\nimport org.springframework.util.CollectionUtils\r\nimport java.util.stream.Collectors\r\nimport org.springframework.util.StringUtils\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nprojectId = ProjectContextHolder.getProjectId()\r\nvar menuList = db.camel().select("""\r\n    select m.*, p.page_name\r\n    from sys_menus m\r\n    left join sys_pages p\r\n    on m.page_id = p.id\r\n    where\r\n    m.project_id = #{projectId}\r\n    ?{name, and m.`name` like #{"%" + name + "%"}}\r\n    ?{menuType, and m.menu_type = #{menuType}}\r\n    order by m.sort_order desc\r\n""")\r\n\r\nif (CollectionUtils.isEmpty(menuList) || StringUtils.hasText(name)) {\r\n    return menuList;\r\n}\r\n\r\nvar toTree = (list, parentId) => {\r\n    return list.filter(it => it.parentId == parentId) // 根据parentId 过滤当前节点\r\n        .each(it => {\r\n            it.children = toTree(list, it.id) // 过滤后循环这些节点递归添加children属性\r\n        })\r\n}\r\nvar parent = parentId ? parentId : -1\r\nreturn toTree(menuList, parent)'),
	('magic-api/api/系统管理/菜单管理/group.json', '{\r\n  "properties" : { },\r\n  "id" : "3af568c7375b429c873ea1b12b601010",\r\n  "name" : "菜单管理",\r\n  "type" : "api",\r\n  "parentId" : "509da4edcdb748baa11910a70584a1c2",\r\n  "path" : "menus",\r\n  "createTime" : null,\r\n  "updateTime" : 1764835004426,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "paths" : [ ],\r\n  "options" : [ ]\r\n}'),
	('magic-api/api/系统管理/菜单管理/removeBatchByIds.ms', '{\r\n  "properties" : { },\r\n  "id" : "1b1a52c4cc5d40359873696df20cac9c",\r\n  "script" : null,\r\n  "groupId" : "3af568c7375b429c873ea1b12b601010",\r\n  "name" : "removeBatchByIds",\r\n  "createTime" : 1764397764160,\r\n  "updateTime" : 1764901845238,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "",\r\n  "method" : "DELETE",\r\n  "parameters" : [ {\r\n    "name" : "ids",\r\n    "value" : "1,2,3",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": 0,\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_menus where id in (#{ids.split(",")})\');'),
	('magic-api/api/系统管理/菜单管理/removeById.ms', '{\r\n  "properties" : { },\r\n  "id" : "baf6c045507346cda8a7511e8b1a9aea",\r\n  "script" : null,\r\n  "groupId" : "3af568c7375b429c873ea1b12b601010",\r\n  "name" : "removeById",\r\n  "createTime" : 1764397785452,\r\n  "updateTime" : 1764901732645,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "DELETE",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_menus where id=#{path.id}\');'),
	('magic-api/api/系统管理/菜单管理/save.ms', '{\r\n  "properties" : { },\r\n  "id" : "93a87634bb8e4114a87ff9a6ac4010eb",\r\n  "script" : null,\r\n  "groupId" : "3af568c7375b429c873ea1b12b601010",\r\n  "name" : "save",\r\n  "createTime" : 1764397708545,\r\n  "updateTime" : 1764835027289,\r\n  "lock" : "0",\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "",\r\n  "method" : "POST",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "{}",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"系统内部出现错误\\",\\n    \\"data\\": {},\\n    \\"status\\": 2\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nbody.parentId = body.parentId?body.parentId:-1L\r\nbody.projectId = ProjectContextHolder.getProjectId()\r\n\r\nreturn db.camel().table(\'sys_menus\').primary(\'id\').insert(body)'),
	('magic-api/api/系统管理/菜单管理/updateById.ms', '{\r\n  "properties" : { },\r\n  "id" : "7fac46eb3fea419d8649a50802ad634d",\r\n  "script" : null,\r\n  "groupId" : "3af568c7375b429c873ea1b12b601010",\r\n  "name" : "updateById",\r\n  "createTime" : 1764397741606,\r\n  "updateTime" : 1764901735863,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "PUT",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "{\\"id\\":\\"1994777220813692930\\",\\"menuType\\":\\"dir\\",\\"parentId\\":\\"-1\\",\\"name\\":\\"啊打分法\\",\\"status\\":\\"0\\",\\"sortOrder\\":1,\\"projectId\\":\\"1994737277546622977\\",\\"icon\\":null,\\"pageId\\":null,\\"permission\\":null,\\"visible\\":null,\\"createBy\\":\\"admin\\",\\"updateBy\\":\\"admin\\",\\"createTime\\":\\"2025-11-29 22:35:25\\",\\"updateTime\\":\\"2025-11-29 22:36:41\\",\\"delFlag\\":\\"0\\"}",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": 1,\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nbody.id = path.id\r\nreturn db.camel().table(\'sys_menus\').primary(\'id\').update(body)'),
	('magic-api/api/系统管理/角色管理/', 'this is directory'),
	('magic-api/api/系统管理/角色管理/getById.ms', '{\r\n  "properties" : { },\r\n  "id" : "6dbe0c11c82f4690af09402ce57160d7",\r\n  "script" : null,\r\n  "groupId" : "0aca5ab8ef5440d6a7635f9a0bb6ab01",\r\n  "name" : "getById",\r\n  "createTime" : 1764398020863,\r\n  "updateTime" : 1764901740899,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "GET",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": {\\n        \\"id\\": \\"1994796403488268290\\",\\n        \\"roleName\\": \\"aaaa\\",\\n        \\"roleDescription\\": null,\\n        \\"projectId\\": \\"1994154455337271298\\",\\n        \\"createBy\\": \\"admin\\",\\n        \\"updateBy\\": \\" \\",\\n        \\"createTime\\": \\"2025-11-29 23:51:39\\",\\n        \\"updateTime\\": null,\\n        \\"delFlag\\": \\"0\\"\\n    },\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : {\r\n    "name" : "",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "msg",\r\n      "value" : "success",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "data",\r\n      "value" : "",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Object",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ {\r\n        "name" : "id",\r\n        "value" : "1994796403488268290",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      }, {\r\n        "name" : "roleName",\r\n        "value" : "aaaa",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      }, {\r\n        "name" : "roleDescription",\r\n        "value" : "null",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "Object",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      }, {\r\n        "name" : "projectId",\r\n        "value" : "1994154455337271298",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      }, {\r\n        "name" : "createBy",\r\n        "value" : "admin",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      }, {\r\n        "name" : "updateBy",\r\n        "value" : " ",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      }, {\r\n        "name" : "createTime",\r\n        "value" : "2025-11-29 23:51:39",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      }, {\r\n        "name" : "updateTime",\r\n        "value" : "null",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "Object",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      }, {\r\n        "name" : "delFlag",\r\n        "value" : "0",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      } ]\r\n    }, {\r\n      "name" : "status",\r\n      "value" : "0",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  }\r\n}\r\n================================\r\nreturn db.camel().table(\'sys_roles\')\r\n    .where()\r\n    .eq(\'id\', path.id)\r\n    .selectOne()'),
	('magic-api/api/系统管理/角色管理/getRoleMenus.ms', '{\r\n  "properties" : { },\r\n  "id" : "b74e71bd9b6948988878d3a7063e7b8d",\r\n  "script" : null,\r\n  "groupId" : "0aca5ab8ef5440d6a7635f9a0bb6ab01",\r\n  "name" : "getRoleMenus",\r\n  "createTime" : 1764398076246,\r\n  "updateTime" : 1764901744392,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "menus/{id}",\r\n  "method" : "GET",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1994796403488268290",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": \\"1994157431292428290,1994157501085646849\\",\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : {\r\n    "name" : "",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "msg",\r\n      "value" : "success",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "data",\r\n      "value" : "",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Array",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ {\r\n        "name" : "",\r\n        "value" : "",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "Object",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ {\r\n          "name" : "menuId",\r\n          "value" : "1994157431292428290",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        } ]\r\n      } ]\r\n    }, {\r\n      "name" : "status",\r\n      "value" : "0",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  }\r\n}\r\n================================\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nprojectId = ProjectContextHolder.getProjectId()\r\nvar val = db.camel().select("""\r\n    select menu_id\r\n    from sys_role_menu\r\n    where\r\n    project_id = #{projectId}\r\n    role_id = #{path.id}\r\n""").map(i => i.menuId).join(",")\r\n\r\nreturn {\r\n    id: path.id,\r\n    menuIds: val\r\n};'),
	('magic-api/api/系统管理/角色管理/group.json', '{\r\n  "properties" : { },\r\n  "id" : "0aca5ab8ef5440d6a7635f9a0bb6ab01",\r\n  "name" : "角色管理",\r\n  "type" : "api",\r\n  "parentId" : "509da4edcdb748baa11910a70584a1c2",\r\n  "path" : "roles",\r\n  "createTime" : null,\r\n  "updateTime" : 1764835036251,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "paths" : [ ],\r\n  "options" : [ ]\r\n}'),
	('magic-api/api/系统管理/角色管理/list.ms', '{\r\n  "properties" : { },\r\n  "id" : "fed23e6c84854b01b01be5d6737159a3",\r\n  "script" : null,\r\n  "groupId" : "0aca5ab8ef5440d6a7635f9a0bb6ab01",\r\n  "name" : "list",\r\n  "createTime" : 1764397914536,\r\n  "updateTime" : 1764835050901,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "list",\r\n  "method" : "GET",\r\n  "parameters" : [ {\r\n    "name" : "projectId",\r\n    "value" : "1994154455337271298",\r\n    "description" : null,\r\n    "required" : false,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : null,\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nprojectId = ProjectContextHolder.getProjectId()\r\nvar val = db.camel().select("""\r\n    select *\r\n    from sys_roles\r\n    where\r\n    project_id = #{projectId}\r\n    ?{roleName, and role_name like #{"%" + roleName + "%"}}\r\n""")\r\n\r\nreturn val;'),
	('magic-api/api/系统管理/角色管理/page.ms', '{\r\n  "properties" : { },\r\n  "id" : "9806b68e355e4956974a6e3749112c69",\r\n  "script" : null,\r\n  "groupId" : "0aca5ab8ef5440d6a7635f9a0bb6ab01",\r\n  "name" : "page",\r\n  "createTime" : 1764397904526,\r\n  "updateTime" : 1764902563809,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "page",\r\n  "method" : "GET",\r\n  "parameters" : [ {\r\n    "name" : "projectId",\r\n    "value" : "1994154455337271298",\r\n    "description" : null,\r\n    "required" : false,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : null,\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": {\\n        \\"total\\": \\"1\\",\\n        \\"items\\": [\\n            {\\n                \\"id\\": \\"1994796403488268290\\",\\n                \\"roleName\\": \\"aaaa\\",\\n                \\"roleDescription\\": null,\\n                \\"projectId\\": \\"1994154455337271298\\",\\n                \\"createBy\\": \\"admin\\",\\n                \\"updateBy\\": \\" \\",\\n                \\"createTime\\": \\"2025-11-29 23:51:39\\",\\n                \\"updateTime\\": null,\\n                \\"delFlag\\": \\"0\\"\\n            }\\n        ]\\n    },\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nprojectId = ProjectContextHolder.getProjectId()\r\nreturn db.camel().page("""\r\n    select *\r\n    from sys_roles\r\n    where\r\n    project_id = #{projectId}\r\n    ?{roleName, and role_name like #{"%" + roleName + "%"}}\r\n""")'),
	('magic-api/api/系统管理/角色管理/removeBatchByIds.ms', '{\r\n  "properties" : { },\r\n  "id" : "a7844b2c170544f9ac5878835fe52c76",\r\n  "script" : null,\r\n  "groupId" : "0aca5ab8ef5440d6a7635f9a0bb6ab01",\r\n  "name" : "removeBatchByIds",\r\n  "createTime" : 1764397984951,\r\n  "updateTime" : 1764901849220,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "",\r\n  "method" : "DELETE",\r\n  "parameters" : [ {\r\n    "name" : "ids",\r\n    "value" : "1,2,3",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_roles where id in (#{ids.split(",")})\');'),
	('magic-api/api/系统管理/角色管理/removeById.ms', '{\r\n  "properties" : { },\r\n  "id" : "c10ed06e5edd4f87913f780e27b863a3",\r\n  "script" : null,\r\n  "groupId" : "0aca5ab8ef5440d6a7635f9a0bb6ab01",\r\n  "name" : "removeById",\r\n  "createTime" : 1764398004482,\r\n  "updateTime" : 1764901747768,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "DELETE",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_roles where id=#{path.id}\');'),
	('magic-api/api/系统管理/角色管理/save.ms', '{\r\n  "properties" : { },\r\n  "id" : "b7ce030bcb13413cb7f976f22e1528a6",\r\n  "script" : null,\r\n  "groupId" : "0aca5ab8ef5440d6a7635f9a0bb6ab01",\r\n  "name" : "save",\r\n  "createTime" : 1764397929033,\r\n  "updateTime" : 1764835065614,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "",\r\n  "method" : "POST",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nbody.projectId = ProjectContextHolder.getProjectId()\r\nreturn db.camel().table(\'sys_roles\').primary(\'id\').insert(body)'),
	('magic-api/api/系统管理/角色管理/updateById.ms', '{\r\n  "properties" : { },\r\n  "id" : "af81fc0d0d404079914fb597d72bfb49",\r\n  "script" : null,\r\n  "groupId" : "0aca5ab8ef5440d6a7635f9a0bb6ab01",\r\n  "name" : "updateById",\r\n  "createTime" : 1764397949577,\r\n  "updateTime" : 1764901751115,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "PUT",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nbody.id = path.id\r\nreturn db.camel().table(\'sys_roles\').primary(\'id\').update(body)'),
	('magic-api/api/系统管理/角色管理/updateRoleMenus.ms', '{\r\n  "properties" : { },\r\n  "id" : "b508ee672f8247b9a721e50fe0b10a72",\r\n  "script" : null,\r\n  "groupId" : "0aca5ab8ef5440d6a7635f9a0bb6ab01",\r\n  "name" : "updateRoleMenus",\r\n  "createTime" : 1764398043485,\r\n  "updateTime" : 1764835072307,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "menus",\r\n  "method" : "PUT",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "{\\"id\\":\\"1994796403488268290\\",\\"menuIds\\":\\"1994157431292428290,1994157501085646849\\"}",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": 2,\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : {\r\n    "name" : "",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "id",\r\n      "value" : "1994796403488268290",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "menuIds",\r\n      "value" : "1994157431292428290,1994157501085646849",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  },\r\n  "responseBodyDefinition" : {\r\n    "name" : "",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "msg",\r\n      "value" : "success",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "data",\r\n      "value" : "2",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "status",\r\n      "value" : "0",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  }\r\n}\r\n================================\r\nimport org.springframework.util.StringUtils\r\nimport com.baomidou.mybatisplus.core.toolkit.IdWorker\r\nimport cn.dev33.satoken.session.SaTerminalInfo\r\nimport cn.dev33.satoken.stp.StpUtil\r\nimport java.time.LocalDateTime\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nprojectId = ProjectContextHolder.getProjectId()\r\n\r\ndb.update(\'delete from sys_role_menu where role_id=#{body.id} and project_id=#{projectId}\')\r\nif (!StringUtils.hasText(body.menuIds)) {\r\n    return true\r\n}\r\nSaTerminalInfo info = StpUtil.getTerminalInfo();\r\nString username = "noLogin";\r\nif (info != null) {\r\n    username = info.getExtra("username");\r\n}\r\nLocalDateTime now = LocalDateTime.now();\r\n\r\nvar menuIds = body.menuIds.split(",")\r\nvar roleMenuList = menuIds.map(menuId => {\r\n    id: IdWorker.getId(),\r\n    role_id: body.id,\r\n    menu_id: menuId,\r\n    project_id : projectId\r\n    create_by: username,\r\n    update_by: username,\r\n    create_time: now,\r\n    update_time: now\r\n})\r\nvar list = Arrays.asList(roleMenuList)\r\nreturn db.table(\'sys_role_menu\').batchInsert(list)'),
	('magic-api/api/系统管理/认证管理/', 'this is directory'),
	('magic-api/api/系统管理/认证管理/group.json', '{\r\n  "properties" : { },\r\n  "id" : "56e11a2faaa64336b64f40eebbb84d76",\r\n  "name" : "认证管理",\r\n  "type" : "api",\r\n  "parentId" : "509da4edcdb748baa11910a70584a1c2",\r\n  "path" : "auth",\r\n  "createTime" : null,\r\n  "updateTime" : 1764845806038,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "paths" : [ ],\r\n  "options" : [ ]\r\n}'),
	('magic-api/api/系统管理/认证管理/login.ms', '{\r\n  "properties" : { },\r\n  "id" : "35f30d4f590d4aa19ed8764301576cac",\r\n  "script" : null,\r\n  "groupId" : "56e11a2faaa64336b64f40eebbb84d76",\r\n  "name" : "login",\r\n  "createTime" : 1764397495441,\r\n  "updateTime" : 1764900561989,\r\n  "lock" : "0",\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "login",\r\n  "method" : "POST",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "{\\"username\\":\\"admin\\",\\"password\\":\\"123456\\"}",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": {\\n        \\"id\\": \\"1\\",\\n        \\"username\\": \\"admin\\",\\n        \\"avatar\\": \\"/api/files/oss/file/alice-macaw.jpg\\",\\n        \\"accessToken\\": \\"DnJi466jR6titmig1lra2i2BOaPoHzyYsRwZiLzz1GWxfNrLRomGmdxWsUEA1pVu\\"\\n    },\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : {\r\n    "name" : "root",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "username",\r\n      "value" : "admin",\r\n      "description" : "",\r\n      "required" : true,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "password",\r\n      "value" : "1234",\r\n      "description" : "",\r\n      "required" : true,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  },\r\n  "responseBodyDefinition" : {\r\n    "name" : "",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "msg",\r\n      "value" : "success",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "data",\r\n      "value" : "",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Object",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ {\r\n        "name" : "id",\r\n        "value" : "1",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      }, {\r\n        "name" : "username",\r\n        "value" : "admin",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      }, {\r\n        "name" : "avatar",\r\n        "value" : "/api/files/oss/file/alice-macaw.jpg",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      }, {\r\n        "name" : "accessToken",\r\n        "value" : "DnJi466jR6titmig1lra2i2BOaPoHzyYsRwZiLzz1GWxfNrLRomGmdxWsUEA1pVu",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "String",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ ]\r\n      } ]\r\n    }, {\r\n      "name" : "status",\r\n      "value" : "0",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  }\r\n}\r\n================================\r\nimport cn.dev33.satoken.stp.SaTokenInfo\r\nimport cn.dev33.satoken.stp.StpUtil\r\nimport cn.dev33.satoken.session.SaTerminalInfo\r\n\r\nimport response\r\nimport org.ssssssss.magicapi.core.context.MagicUser\r\nvar sysUser = db.camel().table(\'sys_users\')\r\n    .columns("id", "username", "avatar")\r\n    .where()\r\n    .eq(\'username\', body.username)\r\n    .eq(\'password\', body.password)\r\n    .selectOne()\r\n\r\nif (Objects.isNull(sysUser)) {\r\n    exit 1, "登录失败"\r\n}\r\n\r\nvar roles = db.camel().select("""\r\n    SELECT DISTINCT(r.role_name) as role_name\r\n    FROM sys_user_role ur, sys_roles r\r\n    WHERE ur.user_id = #{sysUser.id}\r\n    AND ur.role_id = r.id\r\n    AND ur.del_flag = 0\r\n    AND r.del_flag = 0\r\n""").map(r -> r.roleName)\r\n\r\nvar perms = db.camel().select("""\r\n    SELECT DISTINCT(m.permission) as perm_name\r\n    FROM sys_user_role ur, sys_role_menu rm, sys_menus m\r\n    WHERE ur.user_id = #{sysUser.id}\r\n    AND ur.role_id = rm.role_id\r\n    AND rm.menu_id = m.id\r\n    AND ur.del_flag = 0\r\n    AND rm.del_flag = 0\r\n    AND m.del_flag = 0\r\n""").map(r -> r.permName)\r\n\r\nStpUtil.login(sysUser.id)\r\n\r\nSaTokenInfo tokenInfo = StpUtil.getTokenInfo()\r\nSaTerminalInfo terminalInfo = StpUtil.getTerminalInfo()\r\n    .setExtra("username", sysUser.username)\r\n    .setExtra("roles", roles)\r\n    .setExtra("perms", perms)\r\n    .setExtra("magicUser", new MagicUser(sysUser.id.toString(), sysUser.username, tokenInfo.getTokenValue()))\r\nsysUser.accessToken = tokenInfo.getTokenValue()\r\nreturn sysUser'),
	('magic-api/api/系统管理/认证管理/logout.ms', '{\r\n  "properties" : { },\r\n  "id" : "551f7d34c9994b9b886156966aebac46",\r\n  "script" : null,\r\n  "groupId" : "56e11a2faaa64336b64f40eebbb84d76",\r\n  "name" : "logout",\r\n  "createTime" : 1764397494195,\r\n  "updateTime" : 1764835911605,\r\n  "lock" : "0",\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "logout",\r\n  "method" : "POST",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"系统内部出现错误\\",\\n    \\"data\\": null,\\n    \\"status\\": 1\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport cn.dev33.satoken.stp.StpUtil;\r\n\r\nStpUtil.logout();\r\nreturn \'\''),
	('magic-api/api/系统管理/页面管理/', 'this is directory'),
	('magic-api/api/系统管理/页面管理/getById.ms', '{\r\n  "properties" : { },\r\n  "id" : "07163027dd5846808d9500c388380ad3",\r\n  "script" : null,\r\n  "groupId" : "2c4a3f33324c42f1aa48203ffc173a56",\r\n  "name" : "getById",\r\n  "createTime" : 1764398636032,\r\n  "updateTime" : 1764901781377,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "GET",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.camel().table(\'sys_pages\')\r\n    .where()\r\n    .eq(\'id\', path.id)\r\n    .selectOne()'),
	('magic-api/api/系统管理/页面管理/group.json', '{\r\n  "properties" : { },\r\n  "id" : "2c4a3f33324c42f1aa48203ffc173a56",\r\n  "name" : "页面管理",\r\n  "type" : "api",\r\n  "parentId" : "509da4edcdb748baa11910a70584a1c2",\r\n  "path" : "pages",\r\n  "createTime" : null,\r\n  "updateTime" : 1764835144353,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "paths" : [ ],\r\n  "options" : [ ]\r\n}'),
	('magic-api/api/系统管理/页面管理/list.ms', '{\r\n  "properties" : { },\r\n  "id" : "23bac74c56fd4de8a49072a052cafbf0",\r\n  "script" : null,\r\n  "groupId" : "2c4a3f33324c42f1aa48203ffc173a56",\r\n  "name" : "list",\r\n  "createTime" : 1764398808834,\r\n  "updateTime" : 1764835152973,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "list",\r\n  "method" : "GET",\r\n  "parameters" : [ {\r\n    "name" : "projectId",\r\n    "value" : "1994154455337271298",\r\n    "description" : null,\r\n    "required" : false,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : null,\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": [\\n        {\\n            \\"id\\": \\"1994154756995809282\\",\\n            \\"pageName\\": \\"证书管理\\",\\n            \\"pageDescription\\": null,\\n            \\"projectId\\": \\"1994154455337271298\\",\\n            \\"schema\\": \\"{\\\\\\"id\\\\\\":\\\\\\"u:18b8799e19a1\\\\\\",\\\\\\"asideResizor\\\\\\":false,\\\\\\"pullRefresh\\\\\\":{\\\\\\"disabled\\\\\\":true},\\\\\\"regions\\\\\\":[\\\\\\"body\\\\\\"],\\\\\\"body\\\\\\":[{\\\\\\"type\\\\\\":\\\\\\"crud\\\\\\",\\\\\\"syncLocation\\\\\\":false,\\\\\\"api\\\\\\":{\\\\\\"method\\\\\\":\\\\\\"post\\\\\\",\\\\\\"url\\\\\\":\\\\\\"/api/certificate/page\\\\\\",\\\\\\"requestAdaptor\\\\\\":\\\\\\"\\\\\\",\\\\\\"adaptor\\\\\\":\\\\\\"\\\\\\",\\\\\\"messages\\\\\\":{},\\\\\\"dataType\\\\\\":\\\\\\"json\\\\\\"},\\\\\\"defaultParams\\\\\\":{\\\\\\"perPage\\\\\\":12},\\\\\\"columnsCount\\\\\\":4,\\\\\\"bulkActions\\\\\\":[],\\\\\\"itemActions\\\\\\":[],\\\\\\"filterEnabledList\\\\\\":[{\\\\\\"label\\\\\\":\\\\\\"姓名\\\\\\",\\\\\\"value\\\\\\":\\\\\\"real_name\\\\\\"},{\\\\\\"label\\\\\\":\\\\\\"身份证号\\\\\\",\\\\\\"value\\\\\\":\\\\\\"id_no\\\\\\"},{\\\\\\"label\\\\\\":\\\\\\"课程类别\\\\\\",\\\\\\"value\\\\\\":\\\\\\"course_cat\\\\\\"},{\\\\\\"label\\\\\\":\\\\\\"课程名称\\\\\\",\\\\\\"value\\\\\\":\\\\\\"course_name\\\\\\"},{\\\\\\"label\\\\\\":\\\\\\"证书编号\\\\\\",\\\\\\"value\\\\\\":\\\\\\"cert_no\\\\\\"}],\\\\\\"filter\\\\\\":{\\\\\\"title\\\\\\":\\\\\\"查询条件\\\\\\",\\\\\\"columnCount\\\\\\":3,\\\\\\"mode\\\\\\":\\\\\\"horizontal\\\\\\",\\\\\\"body\\\\\\":[{\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"label\\\\\\":\\\\\\"姓名\\\\\\",\\\\\\"name\\\\\\":\\\\\\"real_name\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:a139e06e98b4\\\\\\"},{\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"label\\\\\\":\\\\\\"身份证号\\\\\\",\\\\\\"name\\\\\\":\\\\\\"id_no\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:b26a85e75ffc\\\\\\"},{\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"label\\\\\\":\\\\\\"课程类别\\\\\\",\\\\\\"name\\\\\\":\\\\\\"course_cat\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:457121cf512f\\\\\\"},{\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"label\\\\\\":\\\\\\"课程名称\\\\\\",\\\\\\"name\\\\\\":\\\\\\"course_name\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:6b043da6364b\\\\\\"},{\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"label\\\\\\":\\\\\\"证书编号\\\\\\",\\\\\\"name\\\\\\":\\\\\\"cert_no\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:735c9ebbd2e5\\\\\\"}],\\\\\\"id\\\\\\":\\\\\\"u:80351a09984f\\\\\\",\\\\\\"actions\\\\\\":[{\\\\\\"type\\\\\\":\\\\\\"submit\\\\\\",\\\\\\"label\\\\\\":\\\\\\"提交\\\\\\",\\\\\\"primary\\\\\\":true,\\\\\\"id\\\\\\":\\\\\\"u:aaa10129f30f\\\\\\"}],\\\\\\"feat\\\\\\":\\\\\\"Insert\\\\\\"},\\\\\\"id\\\\\\":\\\\\\"u:62caf1be4063\\\\\\",\\\\\\"perPageAvailable\\\\\\":[5,10,20,50,100],\\\\\\"messages\\\\\\":{},\\\\\\"card\\\\\\":{\\\\\\"type\\\\\\":\\\\\\"card\\\\\\",\\\\\\"header\\\\\\":{\\\\\\"className\\\\\\":\\\\\\"bg-white\\\\\\",\\\\\\"title\\\\\\":\\\\\\"$real_name\\\\\\",\\\\\\"subTitle\\\\\\":\\\\\\"$course_cat\\\\\\",\\\\\\"description\\\\\\":\\\\\\"$course_name\\\\\\",\\\\\\"avatar\\\\\\":\\\\\\"$photo_path\\\\\\",\\\\\\"avatarClassName\\\\\\":\\\\\\"pull-left thumb-md avatar b-3x m-r\\\\\\"},\\\\\\"body\\\\\\":[{\\\\\\"label\\\\\\":\\\\\\"性别\\\\\\",\\\\\\"type\\\\\\":\\\\\\"text\\\\\\",\\\\\\"name\\\\\\":\\\\\\"gender\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:9a33b6bb00a3\\\\\\"},{\\\\\\"label\\\\\\":\\\\\\"身份证号\\\\\\",\\\\\\"type\\\\\\":\\\\\\"text\\\\\\",\\\\\\"name\\\\\\":\\\\\\"id_no\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:9388728384bc\\\\\\"},{\\\\\\"label\\\\\\":\\\\\\"出生日期\\\\\\",\\\\\\"type\\\\\\":\\\\\\"text\\\\\\",\\\\\\"name\\\\\\":\\\\\\"birth_date\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:29007e770ff6\\\\\\"},{\\\\\\"label\\\\\\":\\\\\\"证书编号\\\\\\",\\\\\\"type\\\\\\":\\\\\\"text\\\\\\",\\\\\\"name\\\\\\":\\\\\\"cert_no\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:fe744bdf5f15\\\\\\"},{\\\\\\"label\\\\\\":\\\\\\"发证日期\\\\\\",\\\\\\"type\\\\\\":\\\\\\"text\\\\\\",\\\\\\"name\\\\\\":\\\\\\"issue_date\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:7188de1c1b2d\\\\\\"}],\\\\\\"actions\\\\\\":[{\\\\\\"label\\\\\\":\\\\\\"移除\\\\\\",\\\\\\"confirmText\\\\\\":\\\\\\"您确定要移除该证书?\\\\\\",\\\\\\"actionType\\\\\\":\\\\\\"ajax\\\\\\",\\\\\\"api\\\\\\":{\\\\\\"method\\\\\\":\\\\\\"post\\\\\\",\\\\\\"url\\\\\\":\\\\\\"/api/certificate/delete\\\\\\",\\\\\\"data\\\\\\":{\\\\\\"id\\\\\\":\\\\\\"${id}\\\\\\"}}},{\\\\\\"label\\\\\\":\\\\\\"追加\\\\\\",\\\\\\"actionType\\\\\\":\\\\\\"dialog\\\\\\",\\\\\\"dialog\\\\\\":{\\\\\\"title\\\\\\":\\\\\\"追加其它证书\\\\\\",\\\\\\"body\\\\\\":{\\\\\\"api\\\\\\":{\\\\\\"method\\\\\\":\\\\\\"post\\\\\\",\\\\\\"url\\\\\\":\\\\\\"/api/certificate/add\\\\\\",\\\\\\"requestAdaptor\\\\\\":\\\\\\"\\\\\\",\\\\\\"adaptor\\\\\\":\\\\\\"\\\\\\",\\\\\\"messages\\\\\\":{\\\\\\"success\\\\\\":\\\\\\"新增成功\\\\\\",\\\\\\"failed\\\\\\":\\\\\\"新增失败\\\\\\"},\\\\\\"data\\\\\\":{\\\\\\"c\\\\\\":\\\\\\"${c}\\\\\\",\\\\\\"c.user_id\\\\\\":\\\\\\"${user_id}\\\\\\"},\\\\\\"dataType\\\\\\":\\\\\\"json\\\\\\"},\\\\\\"type\\\\\\":\\\\\\"form\\\\\\",\\\\\\"tabs\\\\\\":[{\\\\\\"title\\\\\\":\\\\\\"证书信息\\\\\\",\\\\\\"body\\\\\\":[{\\\\\\"type\\\\\\":\\\\\\"hidden\\\\\\",\\\\\\"name\\\\\\":\\\\\\"user_id\\\\\\",\\\\\\"required\\\\\\":true},{\\\\\\"name\\\\\\":\\\\\\"id_no\\\\\\",\\\\\\"label\\\\\\":\\\\\\"身份证号\\\\\\",\\\\\\"disabled\\\\\\":true,\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\"},{\\\\\\"name\\\\\\":\\\\\\"c.course_cat\\\\\\",\\\\\\"label\\\\\\":\\\\\\"课程类别\\\\\\",\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"required\\\\\\":true},{\\\\\\"name\\\\\\":\\\\\\"c.course_name\\\\\\",\\\\\\"label\\\\\\":\\\\\\"课程名称\\\\\\",\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"required\\\\\\":true},{\\\\\\"name\\\\\\":\\\\\\"c.cert_no\\\\\\",\\\\\\"label\\\\\\":\\\\\\"证书编号\\\\\\",\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"required\\\\\\":true},{\\\\\\"name\\\\\\":\\\\\\"c.issue_date\\\\\\",\\\\\\"label\\\\\\":\\\\\\"发证日期\\\\\\",\\\\\\"type\\\\\\":\\\\\\"input-date\\\\\\",\\\\\\"value\\\\\\":\\\\\\"${NOW()}\\\\\\",\\\\\\"valueFormat\\\\\\":\\\\\\"YYYY-MM-DD\\\\\\",\\\\\\"inputForbid\\\\\\":true,\\\\\\"required\\\\\\":true},{\\\\\\"name\\\\\\":\\\\\\"c.expire_date\\\\\\",\\\\\\"label\\\\\\":\\\\\\"过期日期\\\\\\",\\\\\\"type\\\\\\":\\\\\\"input-date\\\\\\",\\\\\\"value\\\\\\":\\\\\\"2099-12-31\\\\\\",\\\\\\"valueFormat\\\\\\":\\\\\\"YYYY-MM-DD\\\\\\",\\\\\\"inputForbid\\\\\\":true,\\\\\\"required\\\\\\":true},{\\\\\\"name\\\\\\":\\\\\\"c.remarks\\\\\\",\\\\\\"label\\\\\\":\\\\\\"备注记录\\\\\\",\\\\\\"type\\\\\\":\\\\\\"textarea\\\\\\"}]}]}}}],\\\\\\"id\\\\\\":\\\\\\"u:2630f805bdee\\\\\\"},\\\\\\"mode\\\\\\":\\\\\\"cards\\\\\\"}]}\\",\\n            \\"createBy\\": \\"admin\\",\\n            \\"updateBy\\": \\"admin\\",\\n            \\"createTime\\": \\"2025-11-28 05:21:58\\",\\n            \\"updateTime\\": \\"2025-11-28 16:57:08\\",\\n            \\"delFlag\\": \\"0\\"\\n        },\\n        {\\n            \\"id\\": \\"1994154865049468930\\",\\n            \\"pageName\\": \\"证书录入\\",\\n            \\"pageDescription\\": null,\\n            \\"projectId\\": \\"1994154455337271298\\",\\n            \\"schema\\": \\"{\\\\\\"id\\\\\\":\\\\\\"u:b582c406420c\\\\\\",\\\\\\"asideResizor\\\\\\":false,\\\\\\"pullRefresh\\\\\\":{\\\\\\"disabled\\\\\\":true},\\\\\\"regions\\\\\\":[\\\\\\"body\\\\\\"],\\\\\\"body\\\\\\":[{\\\\\\"id\\\\\\":\\\\\\"u:df91144a7a7f\\\\\\",\\\\\\"type\\\\\\":\\\\\\"form\\\\\\",\\\\\\"title\\\\\\":\\\\\\"表单\\\\\\",\\\\\\"mode\\\\\\":\\\\\\"flex\\\\\\",\\\\\\"labelAlign\\\\\\":\\\\\\"top\\\\\\",\\\\\\"dsType\\\\\\":\\\\\\"api\\\\\\",\\\\\\"feat\\\\\\":\\\\\\"Insert\\\\\\",\\\\\\"body\\\\\\":[{\\\\\\"name\\\\\\":\\\\\\"s.photo_path\\\\\\",\\\\\\"label\\\\\\":\\\\\\"头像\\\\\\",\\\\\\"row\\\\\\":0,\\\\\\"type\\\\\\":\\\\\\"input-image\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:18c1d9351b84\\\\\\",\\\\\\"accept\\\\\\":\\\\\\".jpeg, .jpg, .png, .gif\\\\\\",\\\\\\"uploadType\\\\\\":\\\\\\"fileReceptor\\\\\\",\\\\\\"proxy\\\\\\":true,\\\\\\"multiple\\\\\\":false,\\\\\\"hideUploadButton\\\\\\":false,\\\\\\"autoUpload\\\\\\":true,\\\\\\"receiver\\\\\\":{\\\\\\"url\\\\\\":\\\\\\"/api/file/upload\\\\\\",\\\\\\"method\\\\\\":\\\\\\"post\\\\\\",\\\\\\"requestAdaptor\\\\\\":\\\\\\"\\\\\\",\\\\\\"adaptor\\\\\\":\\\\\\"\\\\\\",\\\\\\"messages\\\\\\":{},\\\\\\"dataType\\\\\\":\\\\\\"form-data\\\\\\"},\\\\\\"frameImage\\\\\\":\\\\\\"/files/default-avatar.jpg\\\\\\",\\\\\\"required\\\\\\":true,\\\\\\"colSize\\\\\\":\\\\\\"1/4\\\\\\",\\\\\\"crop\\\\\\":{\\\\\\"viewMode\\\\\\":1,\\\\\\"aspectRatio\\\\\\":0.66,\\\\\\"scalable\\\\\\":true,\\\\\\"rotatable\\\\\\":true},\\\\\\"cropQuality\\\\\\":0.7},{\\\\\\"name\\\\\\":\\\\\\"s.gender\\\\\\",\\\\\\"label\\\\\\":\\\\\\"性别\\\\\\",\\\\\\"row\\\\\\":0,\\\\\\"type\\\\\\":\\\\\\"switch\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:c2ac27ab6a7a\\\\\\",\\\\\\"onText\\\\\\":\\\\\\"女\\\\\\",\\\\\\"offText\\\\\\":\\\\\\"男\\\\\\",\\\\\\"value\\\\\\":\\\\\\"女\\\\\\",\\\\\\"trueValue\\\\\\":\\\\\\"女\\\\\\",\\\\\\"falseValue\\\\\\":\\\\\\"男\\\\\\",\\\\\\"colSize\\\\\\":\\\\\\"1/4\\\\\\"},{\\\\\\"type\\\\\\":\\\\\\"textarea\\\\\\",\\\\\\"label\\\\\\":\\\\\\"备注记录\\\\\\",\\\\\\"name\\\\\\":\\\\\\"c.remarks\\\\\\",\\\\\\"row\\\\\\":0,\\\\\\"id\\\\\\":\\\\\\"u:b0fca3450727\\\\\\",\\\\\\"minRows\\\\\\":5,\\\\\\"maxRows\\\\\\":20,\\\\\\"colSize\\\\\\":\\\\\\"1/2\\\\\\"},{\\\\\\"name\\\\\\":\\\\\\"s.id_no\\\\\\",\\\\\\"label\\\\\\":\\\\\\"身份证号\\\\\\",\\\\\\"row\\\\\\":1,\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:7154e9c4f70c\\\\\\",\\\\\\"required\\\\\\":true,\\\\\\"colSize\\\\\\":\\\\\\"1/4\\\\\\",\\\\\\"validations\\\\\\":{\\\\\\"maxLength\\\\\\":18,\\\\\\"minLength\\\\\\":18},\\\\\\"validationErrors\\\\\\":{\\\\\\"maxLength\\\\\\":\\\\\\"身份证长度18位\\\\\\",\\\\\\"minLength\\\\\\":\\\\\\"身份证长度18位\\\\\\",\\\\\\"isRequired\\\\\\":\\\\\\"身份证长度18位\\\\\\"}},{\\\\\\"name\\\\\\":\\\\\\"s.real_name\\\\\\",\\\\\\"label\\\\\\":\\\\\\"姓名\\\\\\",\\\\\\"row\\\\\\":1,\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:460fba6286dc\\\\\\",\\\\\\"required\\\\\\":true,\\\\\\"colSize\\\\\\":\\\\\\"1/4\\\\\\"},{\\\\\\"name\\\\\\":\\\\\\"c.course_cat\\\\\\",\\\\\\"label\\\\\\":\\\\\\"课程类别\\\\\\",\\\\\\"row\\\\\\":1,\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:3ec9fb7801c5\\\\\\",\\\\\\"required\\\\\\":true,\\\\\\"colSize\\\\\\":\\\\\\"1/4\\\\\\"},{\\\\\\"name\\\\\\":\\\\\\"c.course_name\\\\\\",\\\\\\"label\\\\\\":\\\\\\"课程名称\\\\\\",\\\\\\"row\\\\\\":1,\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:04b89c457a74\\\\\\",\\\\\\"required\\\\\\":true,\\\\\\"colSize\\\\\\":\\\\\\"1/4\\\\\\"},{\\\\\\"name\\\\\\":\\\\\\"c.cert_no\\\\\\",\\\\\\"label\\\\\\":\\\\\\"证书编号\\\\\\",\\\\\\"row\\\\\\":2,\\\\\\"type\\\\\\":\\\\\\"input-text\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:51bcd83755b0\\\\\\",\\\\\\"colSize\\\\\\":\\\\\\"1/4\\\\\\",\\\\\\"required\\\\\\":true},{\\\\\\"name\\\\\\":\\\\\\"s.birth_date\\\\\\",\\\\\\"label\\\\\\":\\\\\\"出生日期\\\\\\",\\\\\\"row\\\\\\":2,\\\\\\"type\\\\\\":\\\\\\"input-date\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:f16396c2862a\\\\\\",\\\\\\"utc\\\\\\":false,\\\\\\"required\\\\\\":true,\\\\\\"colSize\\\\\\":\\\\\\"1/4\\\\\\",\\\\\\"valueFormat\\\\\\":\\\\\\"YYYY-MM-DD\\\\\\",\\\\\\"displayFormat\\\\\\":\\\\\\"YYYY-MM-DD\\\\\\",\\\\\\"inputForbid\\\\\\":true},{\\\\\\"type\\\\\\":\\\\\\"input-date\\\\\\",\\\\\\"label\\\\\\":\\\\\\"发证日期\\\\\\",\\\\\\"name\\\\\\":\\\\\\"c.issue_date\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:4ca225c6514b\\\\\\",\\\\\\"value\\\\\\":\\\\\\"${NOW()}\\\\\\",\\\\\\"required\\\\\\":true,\\\\\\"row\\\\\\":2,\\\\\\"colSize\\\\\\":\\\\\\"1/4\\\\\\",\\\\\\"valueFormat\\\\\\":\\\\\\"YYYY-MM-DD\\\\\\",\\\\\\"inputForbid\\\\\\":true},{\\\\\\"type\\\\\\":\\\\\\"input-date\\\\\\",\\\\\\"label\\\\\\":\\\\\\"过期日期\\\\\\",\\\\\\"name\\\\\\":\\\\\\"c.expire_date\\\\\\",\\\\\\"row\\\\\\":2,\\\\\\"colSize\\\\\\":\\\\\\"1/4\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:d66e8aadbefb\\\\\\",\\\\\\"value\\\\\\":\\\\\\"2099-12-31\\\\\\",\\\\\\"valueFormat\\\\\\":\\\\\\"YYYY-MM-DD\\\\\\",\\\\\\"inputForbid\\\\\\":true}],\\\\\\"api\\\\\\":{\\\\\\"url\\\\\\":\\\\\\"/api/certificate/add\\\\\\",\\\\\\"method\\\\\\":\\\\\\"post\\\\\\",\\\\\\"requestAdaptor\\\\\\":\\\\\\"\\\\\\",\\\\\\"adaptor\\\\\\":\\\\\\"\\\\\\",\\\\\\"messages\\\\\\":{\\\\\\"success\\\\\\":\\\\\\"新增成功\\\\\\",\\\\\\"failed\\\\\\":\\\\\\"新增失败\\\\\\"},\\\\\\"dataType\\\\\\":\\\\\\"json\\\\\\"},\\\\\\"actions\\\\\\":[{\\\\\\"type\\\\\\":\\\\\\"button\\\\\\",\\\\\\"label\\\\\\":\\\\\\"提交\\\\\\",\\\\\\"onEvent\\\\\\":{\\\\\\"click\\\\\\":{\\\\\\"actions\\\\\\":[{\\\\\\"actionType\\\\\\":\\\\\\"submit\\\\\\",\\\\\\"componentId\\\\\\":\\\\\\"u:df91144a7a7f\\\\\\"}]}},\\\\\\"level\\\\\\":\\\\\\"primary\\\\\\",\\\\\\"id\\\\\\":\\\\\\"u:899ffead9cc1\\\\\\",\\\\\\"disabledOnAction\\\\\\":false}],\\\\\\"resetAfterSubmit\\\\\\":true,\\\\\\"onEvent\\\\\\":{}}]}\\",\\n            \\"createBy\\": \\"admin\\",\\n            \\"updateBy\\": \\"admin\\",\\n            \\"createTime\\": \\"2025-11-28 05:22:24\\",\\n            \\"updateTime\\": \\"2025-11-28 13:42:54\\",\\n            \\"delFlag\\": \\"0\\"\\n        }\\n    ],\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nprojectId = ProjectContextHolder.getProjectId()\r\nvar val = db.camel().select("""\r\n    select *\r\n    from sys_pages\r\n    where\r\n    project_id = #{projectId}\r\n    ?{pageName, and page_name like #{"%" + pageName + "%"}}\r\n""")\r\n\r\nreturn val;'),
	('magic-api/api/系统管理/页面管理/page.ms', '{\r\n  "properties" : { },\r\n  "id" : "0030e67fa89149f7bbfdf2aa23ea81f2",\r\n  "script" : null,\r\n  "groupId" : "2c4a3f33324c42f1aa48203ffc173a56",\r\n  "name" : "page",\r\n  "createTime" : 1764398793984,\r\n  "updateTime" : 1764835155945,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "page",\r\n  "method" : "GET",\r\n  "parameters" : [ {\r\n    "name" : "projectId",\r\n    "value" : "1994154455337271298",\r\n    "description" : null,\r\n    "required" : false,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : null,\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nprojectId = ProjectContextHolder.getProjectId()\r\nvar val = db.camel().page("""\r\n    select *\r\n    from sys_pages\r\n    where\r\n    project_id = #{projectId}\r\n    ?{pageName, and page_name like #{"%" + pageName + "%"}}\r\n""")\r\n\r\nreturn val;'),
	('magic-api/api/系统管理/页面管理/removeBatchByIds.ms', '{\r\n  "properties" : { },\r\n  "id" : "3cf10ab043cb47faad18e72119b00796",\r\n  "script" : null,\r\n  "groupId" : "2c4a3f33324c42f1aa48203ffc173a56",\r\n  "name" : "removeBatchByIds",\r\n  "createTime" : 1764398636053,\r\n  "updateTime" : 1764901856257,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "",\r\n  "method" : "DELETE",\r\n  "parameters" : [ {\r\n    "name" : "ids",\r\n    "value" : "1,2,3",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_pages where id in (#{ids.split(",")})\');'),
	('magic-api/api/系统管理/页面管理/removeById.ms', '{\r\n  "properties" : { },\r\n  "id" : "22a03c44e08e4709a2532054368cb199",\r\n  "script" : null,\r\n  "groupId" : "2c4a3f33324c42f1aa48203ffc173a56",\r\n  "name" : "removeById",\r\n  "createTime" : 1764398636049,\r\n  "updateTime" : 1764901784817,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "DELETE",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_pages where id=#{path.id}\');'),
	('magic-api/api/系统管理/页面管理/save.ms', '{\r\n  "properties" : { },\r\n  "id" : "1c7c3243fed748c4b52a74f50f977513",\r\n  "script" : null,\r\n  "groupId" : "2c4a3f33324c42f1aa48203ffc173a56",\r\n  "name" : "save",\r\n  "createTime" : 1764398636039,\r\n  "updateTime" : 1764902078720,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "",\r\n  "method" : "POST",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport com.quick.boot.modules.common.project.ProjectContextHolder\r\n\r\nbody.projectId = ProjectContextHolder.getProjectId()\r\nif (body.containsKey("schema")) {\r\n    body.put("`schema`", body.schema)\r\n    body.remove("schema")\r\n}\r\nreturn db.camel().table(\'sys_pages\').primary(\'id\').insert(body)'),
	('magic-api/api/系统管理/页面管理/updateById.ms', '{\r\n  "properties" : { },\r\n  "id" : "332968ac8b4f499d9f9cdea24cf29c0f",\r\n  "script" : null,\r\n  "groupId" : "2c4a3f33324c42f1aa48203ffc173a56",\r\n  "name" : "updateById",\r\n  "createTime" : 1764398636043,\r\n  "updateTime" : 1764902171858,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "PUT",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "{\\"pageName\\":\\"test\\",\\"schema\\":\\"1341234\\"}",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": 0,\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : {\r\n    "name" : "",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "msg",\r\n      "value" : "success",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "data",\r\n      "value" : "0",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "status",\r\n      "value" : "0",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  }\r\n}\r\n================================\r\nbody.id = path.id\r\nif (body.containsKey("schema")) {\r\n    body.put("`schema`", body.schema)\r\n    body.remove("schema")\r\n}\r\nreturn db.camel().table(\'sys_pages\').primary(\'id\').update(body)'),
	('magic-api/api/系统管理/项目管理/', 'this is directory'),
	('magic-api/api/系统管理/项目管理/getById.ms', '{\r\n  "properties" : { },\r\n  "id" : "217bfe88ec82430d9e0c713978d87140",\r\n  "script" : null,\r\n  "groupId" : "9438620c663a4af8bdca724772fd39f8",\r\n  "name" : "getById",\r\n  "createTime" : 1764398683213,\r\n  "updateTime" : 1764901770216,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "GET",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": [\\n        {\\n            \\"id\\": \\"1994703801883631617\\",\\n            \\"project_name\\": \\"12341234\\",\\n            \\"project_description\\": \\"1234234\\",\\n            \\"logo\\": \\"/files/2025/11/29/1994701907735945218.jpg\\",\\n            \\"create_by\\": \\"admin\\",\\n            \\"update_by\\": \\"admin\\",\\n            \\"create_time\\": \\"2025-11-29 17:43:41\\",\\n            \\"update_time\\": \\"2025-11-29 17:43:41\\",\\n            \\"del_flag\\": \\"0\\"\\n        }\\n    ],\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : {\r\n    "name" : "",\r\n    "value" : "",\r\n    "description" : "",\r\n    "required" : false,\r\n    "dataType" : "Object",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "",\r\n    "error" : "",\r\n    "expression" : "",\r\n    "children" : [ {\r\n      "name" : "msg",\r\n      "value" : "success",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "String",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    }, {\r\n      "name" : "data",\r\n      "value" : "",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Array",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ {\r\n        "name" : "",\r\n        "value" : "",\r\n        "description" : "",\r\n        "required" : false,\r\n        "dataType" : "Object",\r\n        "type" : null,\r\n        "defaultValue" : null,\r\n        "validateType" : "",\r\n        "error" : "",\r\n        "expression" : "",\r\n        "children" : [ {\r\n          "name" : "id",\r\n          "value" : "1994703801883631617",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "project_name",\r\n          "value" : "12341234",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "project_description",\r\n          "value" : "1234234",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "logo",\r\n          "value" : "/files/2025/11/29/1994701907735945218.jpg",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "create_by",\r\n          "value" : "admin",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "update_by",\r\n          "value" : "admin",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "create_time",\r\n          "value" : "2025-11-29 17:43:41",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "update_time",\r\n          "value" : "2025-11-29 17:43:41",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        }, {\r\n          "name" : "del_flag",\r\n          "value" : "0",\r\n          "description" : "",\r\n          "required" : false,\r\n          "dataType" : "String",\r\n          "type" : null,\r\n          "defaultValue" : null,\r\n          "validateType" : "",\r\n          "error" : "",\r\n          "expression" : "",\r\n          "children" : [ ]\r\n        } ]\r\n      } ]\r\n    }, {\r\n      "name" : "status",\r\n      "value" : "0",\r\n      "description" : "",\r\n      "required" : false,\r\n      "dataType" : "Integer",\r\n      "type" : null,\r\n      "defaultValue" : null,\r\n      "validateType" : "",\r\n      "error" : "",\r\n      "expression" : "",\r\n      "children" : [ ]\r\n    } ]\r\n  }\r\n}\r\n================================\r\nreturn db.camel().table(\'sys_projects\')\r\n    .where()\r\n    .eq(\'id\', path.id)\r\n    .selectOne()'),
	('magic-api/api/系统管理/项目管理/group.json', '{\r\n  "properties" : { },\r\n  "id" : "9438620c663a4af8bdca724772fd39f8",\r\n  "name" : "项目管理",\r\n  "type" : "api",\r\n  "parentId" : "509da4edcdb748baa11910a70584a1c2",\r\n  "path" : "projects",\r\n  "createTime" : null,\r\n  "updateTime" : 1764835110324,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "paths" : [ ],\r\n  "options" : [ ]\r\n}'),
	('magic-api/api/系统管理/项目管理/page.ms', '{\r\n  "properties" : { },\r\n  "id" : "9616159d472341199384c8527d54f228",\r\n  "script" : null,\r\n  "groupId" : "9438620c663a4af8bdca724772fd39f8",\r\n  "name" : "page",\r\n  "createTime" : 1764410236954,\r\n  "updateTime" : 1764835119494,\r\n  "lock" : "0",\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "page",\r\n  "method" : "GET",\r\n  "parameters" : [ {\r\n    "name" : "page",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : false,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : null,\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  }, {\r\n    "name" : "perPage",\r\n    "value" : "10",\r\n    "description" : null,\r\n    "required" : false,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : null,\r\n    "error" : null,\r\n    "expression" : null,\r\n    "children" : null\r\n  } ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": {\\n        \\"total\\": \\"4\\",\\n        \\"items\\": [\\n            {\\n                \\"id\\": \\"1994719466048790530\\",\\n                \\"project_name\\": null,\\n                \\"project_description\\": null,\\n                \\"logo\\": null,\\n                \\"user_type\\": \\"admin\\",\\n                \\"create_time\\": \\"2025-11-29 18:45:55\\"\\n            },\\n            {\\n                \\"id\\": \\"1994703904446947330\\",\\n                \\"project_name\\": \\"12341231234\\",\\n                \\"project_description\\": null,\\n                \\"logo\\": \\"/files/2025/11/29/1994703885371252737.jpg\\",\\n                \\"user_type\\": \\"admin\\",\\n                \\"create_time\\": \\"2025-11-29 17:44:05\\"\\n            },\\n            {\\n                \\"id\\": \\"1994703801883631617\\",\\n                \\"project_name\\": \\"12341234\\",\\n                \\"project_description\\": \\"1234234\\",\\n                \\"logo\\": \\"/files/2025/11/29/1994701907735945218.jpg\\",\\n                \\"user_type\\": \\"admin\\",\\n                \\"create_time\\": \\"2025-11-29 17:43:41\\"\\n            },\\n            {\\n                \\"id\\": \\"1994154455337271298\\",\\n                \\"project_name\\": \\"电子证书管理\\",\\n                \\"project_description\\": null,\\n                \\"logo\\": null,\\n                \\"user_type\\": \\"admin\\",\\n                \\"create_time\\": \\"2025-11-28 05:20:46\\"\\n            }\\n        ]\\n    },\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport cn.dev33.satoken.stp.StpUtil;\r\n\r\ntry {\r\n    var userId = StpUtil.getLoginIdAsLong();\r\n    var val = db.camel().page("""\r\n        select p.id, p.project_name, p.project_description, p.logo, up.user_type, p.create_time\r\n        from sys_projects p\r\n        join sys_projects_users up\r\n        on p.id = up.project_id\r\n        where\r\n        p.del_flag = \'0\'\r\n        and up.user_id = #{userId}\r\n        ?{projectNamel, and p.project_name like #{"%" + projectName + "%"}}\r\n        order by p.create_time desc\r\n    """)\r\n    return val;\r\n} catch (e) {\r\n    exit 1, e.getMessage();\r\n}'),
	('magic-api/api/系统管理/项目管理/removeById.ms', '{\r\n  "properties" : { },\r\n  "id" : "671f450e6cf145509c004a75b02321c8",\r\n  "script" : null,\r\n  "groupId" : "9438620c663a4af8bdca724772fd39f8",\r\n  "name" : "removeById",\r\n  "createTime" : 1764398683217,\r\n  "updateTime" : 1764901773751,\r\n  "lock" : null,\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "DELETE",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : null,\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nreturn db.update(\'delete from sys_projects where id=#{path.id}\');'),
	('magic-api/api/系统管理/项目管理/saveProjects.ms', '{\r\n  "properties" : { },\r\n  "id" : "28b49bc3bc8c4ad9b4c948df9832ee16",\r\n  "script" : null,\r\n  "groupId" : "9438620c663a4af8bdca724772fd39f8",\r\n  "name" : "saveProjects",\r\n  "createTime" : 1764410298340,\r\n  "updateTime" : 1764835129309,\r\n  "lock" : "0",\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "",\r\n  "method" : "POST",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "",\r\n  "headers" : [ ],\r\n  "paths" : [ ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": \\"1994732428008423426\\",\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nimport cn.dev33.satoken.stp.StpUtil;\r\n\r\ntry {\r\n    var userId = StpUtil.getLoginIdAsLong();\r\n    var val = db.transaction(() => {\r\n        var v1 = db.camel().table(\'sys_projects\').primary(\'id\').insert(body);\r\n        var v2 = db.camel().table(\'sys_projects_users\').primary(\'id\').insert({\r\n            user_id: userId,\r\n            project_id: v1,\r\n            user_type: "admin"\r\n        });\r\n        return v2;\r\n    });\r\n    return val;\r\n} catch (e) {\r\n    exit 1, e.getMessage();\r\n}'),
	('magic-api/api/系统管理/项目管理/updateById.ms', '{\r\n  "properties" : { },\r\n  "id" : "ac6c200430fc44f0a68bb7d1c97c59f1",\r\n  "script" : null,\r\n  "groupId" : "9438620c663a4af8bdca724772fd39f8",\r\n  "name" : "updateById",\r\n  "createTime" : 1764398683221,\r\n  "updateTime" : 1764901777818,\r\n  "lock" : "0",\r\n  "createBy" : null,\r\n  "updateBy" : "admin",\r\n  "path" : "{id}",\r\n  "method" : "PUT",\r\n  "parameters" : [ ],\r\n  "options" : [ ],\r\n  "requestBody" : "{\\"projectName\\":\\"1234\\"}",\r\n  "headers" : [ ],\r\n  "paths" : [ {\r\n    "name" : "id",\r\n    "value" : "1",\r\n    "description" : null,\r\n    "required" : true,\r\n    "dataType" : "String",\r\n    "type" : null,\r\n    "defaultValue" : null,\r\n    "validateType" : "expression",\r\n    "error" : null,\r\n    "expression" : "id.length() > 0",\r\n    "children" : null\r\n  } ],\r\n  "responseBody" : "{\\n    \\"msg\\": \\"success\\",\\n    \\"data\\": 0,\\n    \\"status\\": 0\\n}",\r\n  "description" : null,\r\n  "requestBodyDefinition" : null,\r\n  "responseBodyDefinition" : null\r\n}\r\n================================\r\nbody.id = path.id\r\nreturn db.camel().table(\'sys_projects\').primary(\'id\').update(body)'),
	('magic-api/datasource/', 'this is directory'),
	('magic-api/function/', 'this is directory');
